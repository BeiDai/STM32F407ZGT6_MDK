## A4988驱动42步进电机

### 使用经验

- A4988驱动12V电容输入端，必须加上100uF的电容，否则脉冲控制会出错
- A4988的步进角度越小所需的，所需的电流越下
- 42步进电机会出现停止时噪音，运行时有最小启动频率的问题


### A4988引脚连接

| 引脚   | 功能   | 接线 | STM32配置 |
| ------ | ------ | ---- | --------- |
| DIR    | 正反转 | PF12 | DIR       |
| STEP   | 步进脚 | PF11 | STEP      |
| ENABLE | 使能脚 | PF13 | EN        |
| A2     | 红线   |      |           |
| A1     | 蓝线   |      |           |
| B2     | 黑线   |      |           |
| B1     | 绿线   |      |           |
| M0     | H      |      |           |
| M1     | H      |      |           |
| M2     | H      |      |           |

- 正转控制，任意调换A相或B相,转向相反
- M2.M1.M0 = H H H ,6400转一圈
- M2.M1.M0 = L L L ,步进1.8°

### 42步进电机使用
  步进电机驱动程序

    void Step_Control(u8 dir,u16 period,u32 steps)
    // period设置为350(当M2M1M0 = LLL时)
    {
    	u32 i; 
    	EN =0;
    	DIR = dir;
    	for(i=0; i <= steps;i++)
    	{
    	STEP = 1;
    	delay_us(2);
    	STEP = 0;
    	delay_us(period);
    	}
    	delay_ms(10);
    	EN =1;    //关闭电机
    }
